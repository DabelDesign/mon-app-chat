<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ðŸ”¹ SÃ©curisation du contenu -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net https://unpkg.com;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">

    <!-- ðŸ”¹ Ajout du manifest pour PWA -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <title>Mon App Chat</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="chat-container">
        <header>
            <h1>Mon Chat</h1>
        </header>

        <!-- Connexion utilisateur -->
        <div class="login">
            <label for="username-input">Pseudo :</label>
            <input type="text" id="username-input" placeholder="Choisissez votre pseudo" title="Entrez votre pseudo ici" aria-label="Pseudo">
            <button id="set-username" title="Confirmer votre pseudo">Entrer</button>
        </div>

        <!-- Liste des utilisateurs en ligne -->
        <div class="user-list">
            <label for="user-list">Utilisateur Ã  contacter :</label>
            <select id="user-list" title="Choisissez un utilisateur" aria-label="Liste des utilisateurs"></select>
        </div>

        <!-- Zone de discussion -->
        <div class="chat-box" id="chat-box" title="Zone de discussion" aria-label="Zone de discussion"></div>

        <!-- ContrÃ´les de messages -->
        <div class="message-controls">
            <label for="message-input">Message :</label>
            <input type="text" id="message-input" placeholder="Tapez votre message..." title="Saisissez votre message" aria-label="Message">
            <label for="file-input">Ajouter un fichier :</label>
            <input type="file" id="file-input" accept="image/*,video/*,.pdf,.txt" title="SÃ©lectionnez un fichier" aria-label="Ajouter un fichier">
            <button id="send-button" title="Envoyer votre message">Envoyer</button>
        </div>

        <!-- ContrÃ´les dâ€™appel -->
        <div class="call-controls">
            <button id="video-call" title="Lancer un appel vidÃ©o" aria-label="Appel vidÃ©o">ðŸ“¹ Appel VidÃ©o</button>
            <button id="voice-call" title="Lancer un appel vocal" aria-label="Appel vocal">ðŸ“ž Appel Vocal</button>
            <button id="end-call" hidden title="Terminer lâ€™appel" aria-label="Terminer lâ€™appel">ðŸ”´ Terminer Appel</button>
        </div>

        <!-- VidÃ©os avec contrÃ´les -->
        <div class="video-container">
            <video id="local-video" autoplay muted controls title="Votre vidÃ©o locale"></video>
            <video id="remote-video" autoplay controls title="VidÃ©o distante"></video>
        </div>
    </div>

    <!-- ðŸ”¹ Inclusion des bibliothÃ¨ques optimisÃ©es -->
    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4.3.2/dist/socket.io.min.js" async></script>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js" async></script>
    <script src="/script.js" async></script>
    

</body>
</html>
